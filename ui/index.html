<!DOCTYPE html>
<html>
<head>
    <title>Escrow DApp</title>
</head>
<body>
    <h1>Create Offer</h1>
    <input type="text" id="senderPrivateKey" placeholder="Sender Private Key"><br>
    <input type="text" id="recipient" placeholder="Recipient Address"><br>
    <input type="number" id="amount" placeholder="Amount (WEGLD)"><br>
    <button onclick="createOffer()">Create Offer</button>
    <div id="result"></div>

    <h1>Get Offers</h1>
    <input type="text" id="userAddress" placeholder="User Address"><br>
    <button onclick="getOffers()">Get Offers</button>
    <div id="offers"></div>

    <script>
        async function createOffer() {
            const senderPrivateKey = document.getElementById('senderPrivateKey').value;
            const recipient = document.getElementById('recipient').value;
            const amount = document.getElementById('amount').value;

            const response = await fetch('/createOffer', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ senderPrivateKey, recipient, amount }),
            });

            const data = await response.json();
            document.getElementById('result').innerText = `Transaction Hash: ${data.txHash}`;
        }

        async function getOffers() {
            const userAddress = document.getElementById('userAddress').value;
            const response = await fetch(`/getOffers/${userAddress}`);
            const offers = await response.json();
            document.getElementById('offers').innerText = JSON.stringify(offers, null, 2); // Pretty print JSON
        }
    </script>
</body>
</html>